"use client"
var g=Object.create;var l=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty;var f=(e,t)=>{for(var o in t)l(e,o,{get:t[o],enumerable:!0})},D=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of A(t))!V.call(e,n)&&n!==o&&l(e,n,{get:()=>t[n],enumerable:!(a=N(t,n))||a.enumerable});return e};var P=(e,t,o)=>(o=e!=null?g(C(e)):{},D(t||!e||!e.__esModule?l(o,"default",{value:e,enumerable:!0}):o,e)),h=e=>D(l({},"__esModule",{value:!0}),e);var x={};f(x,{DevToolsContext:()=>v,DevToolsContextProvider:()=>_,DevtoolsEvent:()=>y,hooksByScope:()=>L,receive:()=>O,scopes:()=>E,send:()=>d});module.exports=h(x);var y=(s=>(s.RELOAD="devtools:reload",s.DEVTOOLS_INIT="devtools:init",s.DEVTOOLS_HANDSHAKE="devtools:handshake",s.DEVTOOLS_ALREADY_CONNECTED="devtools:already-connected",s.ACTIVITY="devtools:send-activity",s.DEVTOOLS_ACTIVITY_UPDATE="devtools:activity-update",s.DEVTOOLS_CONNECTED_APP="devtools:connected-app",s.DEVTOOLS_DISCONNECTED_APP="devtools:disconnected-app",s.DEVTOOLS_HIGHLIGHT_IN_MONITOR="devtools:highlight-in-monitor",s.DEVTOOLS_HIGHLIGHT_IN_MONITOR_ACTION="devtools:highlight-in-monitor-action",s.DEVTOOLS_LOGIN_SUCCESS="devtools:login-success",s.DEVTOOLS_DISPLAY_LOGIN_FAILURE="devtools:display-login-failure",s.DEVTOOLS_LOGIN_FAILURE="devtools:login-failure",s.DEVTOOLS_RELOAD_AFTER_LOGIN="devtools:reload-after-login",s.DEVTOOLS_INVALIDATE_QUERY="devtools:invalidate-query",s.DEVTOOLS_INVALIDATE_QUERY_ACTION="devtools:invalidate-query-action",s))(y||{});var E={useCan:"access-control",useLog:"audit-log",useLogList:"audit-log",useCreate:"data",useCreateMany:"data",useCustom:"data",useCustomMutation:"data",useDelete:"data",useDeleteMany:"data",useInfiniteList:"data",useList:"data",useMany:"data",useOne:"data",useUpdate:"data",useUpdateMany:"data",useForgotPassword:"auth",useGetIdentity:"auth",useIsAuthenticated:"auth",useLogin:"auth",useLogout:"auth",useOnError:"auth",usePermissions:"auth",useRegister:"auth",useUpdatePassword:"auth"},L=Object.entries(E).reduce((e,[t,o])=>(e[o]||(e[o]=[]),e[o].push(t),e),{});var i=P(require("react"));async function d(e,t,o){if(e.readyState!==e.OPEN){await new Promise(a=>{let n=()=>{e.send(JSON.stringify({event:t,payload:o})),a(),e.removeEventListener("open",n)};e.addEventListener("open",n)});return}e.send(JSON.stringify({event:t,payload:o}))}function O(e,t,o){let a=n=>{let{event:u,payload:T}=JSON.parse(n.data);t===u&&o(T)};return e.addEventListener("message",a),()=>{e.removeEventListener("message",a)}}var v=i.default.createContext({__devtools:!1,port:5001,url:"localhost",secure:!1,ws:null}),_=({__devtools:e,port:t,children:o})=>{let[a,n]=i.default.useState({__devtools:e??!1,port:t??5001,url:"localhost",secure:!1,ws:null,devtoolsUrl:"http://localhost:5001"}),[u,T]=i.default.useState(null);i.default.useEffect(()=>{let c=null,r=new WebSocket(`${a.secure?"wss":"ws"}://localhost:${a.port}`),p=O(r,"devtools:handshake",I=>{n(m=>({...m,devtoolsUrl:I.url})),p()});return r.addEventListener("open",()=>{a.__devtools||(c=setTimeout(()=>{d(r,"devtools:init",{url:window.location.origin})},300))}),T(r),()=>{p(),c&&clearTimeout(c),r.readyState===WebSocket.CONNECTING?r.addEventListener("open",()=>{r.close(1e3,window.location.origin)}):r.close(1e3,window.location.origin)}},[]);let S=i.default.useMemo(()=>({...a,ws:u}),[a,u]);return i.default.createElement(v.Provider,{value:S},o)};
//# sourceMappingURL=index.cjs.map